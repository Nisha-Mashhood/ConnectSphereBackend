{"version":3,"file":"mentor-experience-model.js","sourceRoot":"","sources":["../../src/Models/mentor-experience-model.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,qDAA4C;AAE5C,kEAA0C;AAC1C,6DAA8D;AAE9D,MAAM,sBAAsB,GAAG,IAAI,iBAAM,CACvC;IACE,kBAAkB,EAAE;QACjB,IAAI,EAAE,MAAM;QACZ,MAAM,EAAE,IAAI;KACd;IACD,QAAQ,EAAE;QACR,IAAI,EAAE,iBAAM,CAAC,KAAK,CAAC,QAAQ;QAC3B,GAAG,EAAE,QAAQ;QACb,QAAQ,EAAE,IAAI;QACd,KAAK,EAAE,IAAI;KACZ;IACD,IAAI,EAAE;QACJ,IAAI,EAAE,MAAM;QACZ,QAAQ,EAAE,IAAI;QACd,IAAI,EAAE,IAAI;KACX;IACD,YAAY,EAAE;QACZ,IAAI,EAAE,MAAM;QACZ,QAAQ,EAAE,IAAI;QACd,IAAI,EAAE,IAAI;KACX;IACD,SAAS,EAAE;QACT,IAAI,EAAE,IAAI;QACV,QAAQ,EAAE,IAAI;KACf;IACD,OAAO,EAAE;QACP,IAAI,EAAE,IAAI;KACX;IACD,SAAS,EAAE;QACT,IAAI,EAAE,OAAO;QACb,OAAO,EAAE,KAAK;KACf;IACD,WAAW,EAAE;QACX,IAAI,EAAE,MAAM;QACZ,SAAS,EAAE,GAAG;KACf;CACF,EACD;IACE,UAAU,EAAE,IAAI;CACjB,CACF,CAAC;AAEF,+CAA+C;AAC/C,sBAAsB,CAAC,GAAG,CAAC,MAAM,EAAE,KAAK,WAAW,IAAI;IACrD,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC7B,IAAI,CAAC;YACH,IAAI,CAAC,kBAAkB,GAAG,MAAM,IAAA,+BAAgB,EAAC,kBAAkB,EAAE,QAAQ,CAAC,CAAC;YAC/E,gBAAM,CAAC,KAAK,CACV,iCAAiC,IAAI,CAAC,kBAAkB,iBAAiB,IAAI,CAAC,QAAQ,EAAE,CACzF,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,gBAAM,CAAC,KAAK,CACV,wCAAwC,IAAI,CAAC,kBAAkB,iBAAiB,IAAI,CAAC,QAAQ,MAAM,KAAK,EAAE,CAC3G,CAAC;YACF,OAAO,IAAI,CAAC,KAAc,CAAC,CAAC;QAC9B,CAAC;IACH,CAAC;IACD,IAAI,EAAE,CAAC;AACT,CAAC,CAAC,CAAC;AAEH,kBAAe,kBAAQ,CAAC,KAAK,CAAoB,kBAAkB,EAAE,sBAAsB,CAAC,CAAC","sourcesContent":["import mongoose, { Schema } from \"mongoose\";\r\nimport { IMentorExperience } from \"../Interfaces/Models/i-mentor-experience\";\r\nimport logger from \"../core/utils/logger\";\r\nimport { generateCustomId } from \"../core/utils/id-generator\";\r\n\r\nconst MentorExperienceSchema = new Schema(\r\n  {\r\n    mentorExperienceId: {\r\n       type: String,\r\n       unique: true,\r\n    },\r\n    mentorId: {\r\n      type: Schema.Types.ObjectId,\r\n      ref: \"Mentor\",\r\n      required: true,\r\n      index: true,\r\n    },\r\n    role: {\r\n      type: String,\r\n      required: true,\r\n      trim: true,\r\n    },\r\n    organization: {\r\n      type: String,\r\n      required: true,\r\n      trim: true,\r\n    },\r\n    startDate: {\r\n      type: Date,\r\n      required: true,\r\n    },\r\n    endDate: {\r\n      type: Date,\r\n    },\r\n    isCurrent: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    description: {\r\n      type: String,\r\n      maxlength: 500,\r\n    },\r\n  },\r\n  {\r\n    timestamps: true,\r\n  }\r\n);\r\n\r\n// Pre-save hook to generate mentorExperineceId\r\nMentorExperienceSchema.pre(\"save\", async function (next) {\r\n  if (!this.mentorExperienceId) {\r\n    try {\r\n      this.mentorExperienceId = await generateCustomId(\"mentorExperience\", \"MTREXP\");\r\n      logger.debug(\r\n        `Generated mentorexperineceId: ${this.mentorExperienceId} for mentorId ${this.mentorId}`\r\n      );\r\n    } catch (error) {\r\n      logger.error(\r\n        `Error generating mentorexperineceId: ${this.mentorExperienceId} for mentorId ${this.mentorId} : ${error}`\r\n      );\r\n      return next(error as Error);\r\n    }\r\n  }\r\n  next();\r\n});\r\n\r\nexport default mongoose.model<IMentorExperience>(\"MentorExperience\", MentorExperienceSchema);\r\n"]}