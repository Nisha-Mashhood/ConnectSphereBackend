{"version":3,"file":"mentor-repository.js","sourceRoot":"","sources":["../../src/Repositories/mentor-repository.ts"],"names":[],"mappings":"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","sourcesContent":["import { injectable } from \"inversify\";\r\nimport { Types, Model } from \"mongoose\";\r\nimport { BaseRepository } from \"../core/repositries/base-repositry\";\r\nimport { RepositoryError } from \"../core/utils/error-handler\";\r\nimport logger from \"../core/utils/logger\";\r\nimport Mentor from \"../Models/mentor-model\";\r\nimport { IMentor } from \"../Interfaces/Models/i-mentor\";\r\nimport { IUser } from \"../Interfaces/Models/i-user\";\r\nimport { CompleteMentorDetails, MentorQuery } from \"../Utils/types/mentor-types\";\r\nimport { StatusCodes } from \"../enums/status-code-enums\";\r\nimport { IMentorRepository } from \"../Interfaces/Repository/i-mentor-repositry\";\r\nimport { ClientSession } from \"mongoose\";\r\n\r\n@injectable()\r\nexport class MentorRepository extends BaseRepository<IMentor> implements IMentorRepository {\r\n  constructor() {\r\n    super(Mentor as Model<IMentor>);\r\n  }\r\n\r\n  private toObjectId = (id?: string | Types.ObjectId | IUser): Types.ObjectId => {\r\n    if (!id) {\r\n      logger.warn('Missing ID when converting to ObjectId');\r\n      throw new RepositoryError('Invalid ID: ID is required', StatusCodes.BAD_REQUEST);\r\n    }\r\n    let idStr: string;\r\n    if (typeof id === 'string') {\r\n      idStr = id;\r\n    } else if (id instanceof Types.ObjectId) {\r\n      idStr = id.toString();\r\n    } else if (typeof id === 'object' && '_id' in id) {\r\n      idStr = (id as IUser)._id.toString();\r\n    } else {\r\n      logger.warn(`Invalid ID type: ${typeof id}`);\r\n      throw new RepositoryError('Invalid ID: must be a string, ObjectId', StatusCodes.BAD_REQUEST);\r\n    }\r\n    if (!Types.ObjectId.isValid(idStr)) {\r\n      logger.warn(`Invalid ObjectId format: ${idStr}`);\r\n      throw new RepositoryError('Invalid ID: must be a 24 character hex string', StatusCodes.BAD_REQUEST);\r\n    }\r\n    return new Types.ObjectId(idStr);\r\n  }\r\n\r\n  // public submitMentorRequest = async (data: Partial<IMentor>, options?: { session?: ClientSession }): Promise<IMentor> => {\r\n  //   try {\r\n  //     logger.debug(`Submitting mentor request for user: ${data.userId}`);\r\n  //     const mentor = await this.create({\r\n  //       ...data,\r\n  //       userId: this.toObjectId(data.userId),\r\n  //     }, options?.session);\r\n  //     logger.info(`Mentor request submitted: ${mentor._id}`);\r\n  //     return mentor;\r\n  //   } catch (error: unknown) {\r\n  //     const err = error instanceof Error ? error : new Error(String(error));\r\n  //     logger.error(`Error submitting mentor request for user ${data.userId}`, err);\r\n  //     throw new RepositoryError('Error submitting mentor request', StatusCodes.INTERNAL_SERVER_ERROR, err);\r\n  //   }\r\n  // }\r\n\r\n   public saveMentorRequest = async (data: {\r\n    userId: string;\r\n    skills: string[];\r\n    specialization: string;\r\n    bio: string;\r\n    price: number;\r\n    availableSlots: object[];\r\n    timePeriod: number;\r\n    certifications: string[];\r\n  }, options?: { session?: ClientSession }): Promise<IMentor> => {\r\n    try {\r\n      logger.debug(`Saving mentor request for user: ${data.userId}`);\r\n      const mentor = await this.create({\r\n        ...data,\r\n        userId: this.toObjectId(data.userId),\r\n      }, options?.session);\r\n      logger.info(`Mentor request saved: ${mentor._id}`);\r\n      return mentor;\r\n    } catch (error: unknown) {\r\n      const err = error instanceof Error ? error : new Error(String(error));\r\n      logger.error(`Error saving mentor request for user ${data.userId}`, err);\r\n      throw new RepositoryError('Error saving mentor request', StatusCodes.INTERNAL_SERVER_ERROR, err);\r\n    }\r\n  }\r\n\r\n public getAllMentorRequests = async (\r\n  page: number = 1,\r\n  limit: number = 10,\r\n  search: string = \"\",\r\n  status: string = \"\",\r\n  sort: string = \"desc\"\r\n): Promise<{\r\n  mentors: IMentor[];\r\n  total: number;\r\n  page: number;\r\n  pages: number;\r\n}> => {\r\n  try {\r\n    logger.debug(\r\n      `Fetching mentor requests: page=${page}, limit=${limit}, search=\"${search}\", status=\"${status}\"`\r\n    );\r\n\r\n    const pipeline: any[] = [];\r\n\r\n    const match: any = {};\r\n    if (status) match.isApproved = status;\r\n    pipeline.push({ $match: match });\r\n\r\n    pipeline.push({\r\n      $lookup: {\r\n        from: \"users\",\r\n        localField: \"userId\",\r\n        foreignField: \"_id\",\r\n        as: 'userId',\r\n      },\r\n    });\r\n    pipeline.push({ $unwind: { path: \"$userId\", preserveNullAndEmptyArrays: true } });\r\n\r\n    pipeline.push({\r\n      $lookup: {\r\n        from: \"skills\",\r\n        localField: \"skills\",\r\n        foreignField: \"_id\",\r\n        as: 'skills',\r\n      },\r\n    });\r\n\r\n    if (search) {\r\n      pipeline.push({\r\n        $match: {\r\n          $or: [\r\n            { \"userId.name\": { $regex: search, $options: \"i\" } },\r\n            { \"userId.email\": { $regex: search, $options: \"i\" } },\r\n          ],\r\n        },\r\n      });\r\n    }\r\n\r\n    pipeline.push({\r\n      $facet: {\r\n        metadata: [{ $count: \"total\" }],\r\n        data: [\r\n          { $sort: { createdAt: sort === \"desc\" ? -1 : 1 } },\r\n          { $skip: (page - 1) * limit },\r\n          { $limit: limit },\r\n          {\r\n            $project: {\r\n              id: \"$_id\",\r\n              mentorId: 1,\r\n              userId: 1,\r\n              isApproved: 1,\r\n              rejectionReason: 1,\r\n              bio: 1,\r\n              price: 1,\r\n              timePeriod: 1,\r\n              availableSlots: 1,\r\n              certifications: 1,\r\n              specialization: 1,\r\n              createdAt: 1,\r\n              updatedAt: 1,\r\n              skills: 1,\r\n            },\r\n          },\r\n        ],\r\n      },\r\n    });\r\n\r\n    const [result] = await this.model.aggregate(pipeline).exec();\r\n\r\n    const total = result.metadata[0]?.total ?? 0;\r\n    const mentors = result.data ?? [];\r\n\r\n    logger.info(`Fetched ${mentors.length} mentors, total: ${total}`);\r\n\r\n    return {\r\n      mentors,\r\n      total,\r\n      page,\r\n      pages: Math.ceil(total / limit),\r\n    };\r\n  } catch (error: unknown) {\r\n    const err = error instanceof Error ? error : new Error(String(error));\r\n    logger.error(\"Error fetching mentor requests\", err);\r\n    throw new RepositoryError(\r\n      \"Error fetching mentor requests\",\r\n      StatusCodes.INTERNAL_SERVER_ERROR,\r\n      err\r\n    );\r\n  }\r\n};\r\n\r\n  public getAllMentors = async (\r\n    query: MentorQuery = {}\r\n  ): Promise<{ mentors: CompleteMentorDetails[]; total: number }> => {\r\n    try {\r\n      logger.debug(`Fetching all approved mentors with query: ${JSON.stringify(query)}`);\r\n      const {\r\n        search,\r\n        page = 1,\r\n        limit = 10,\r\n        skill,\r\n        category,\r\n        sortBy = \"feedbackCount\",\r\n        sortOrder = \"desc\",\r\n        excludeMentorId,\r\n      } = query;\r\n\r\n      logger.info(`Selected category: ${category || 'None'}, Skill: ${skill || 'None'}`);\r\n\r\n      const matchStage: Record<string, any> = { isApproved: 'Completed' };\r\n      if (search) {\r\n        matchStage['userId.name'] = { $regex: search, $options: 'i' };\r\n      }\r\n      if (excludeMentorId) {\r\n        logger.info(`Excluded mentorId: ${excludeMentorId}`);\r\n        matchStage['_id'] = { $ne: this.toObjectId(excludeMentorId) };\r\n      }\r\n\r\n      const pipeline: any[] = [\r\n        {\r\n          $lookup: {\r\n            from: 'users',\r\n            localField: 'userId',\r\n            foreignField: '_id',\r\n            as: 'userId',\r\n            pipeline: [{ $project: { id : 1, name: 1, email: 1, profilePic: 1 } }],\r\n          },\r\n        },\r\n        { $unwind: { path: '$userId', preserveNullAndEmptyArrays: true } },\r\n        {\r\n          $lookup: {\r\n            from: 'skills',\r\n            localField: 'skills',\r\n            foreignField: '_id',\r\n            as: 'skills',\r\n            pipeline: [{ $project: { id: 1, name: 1, subcategoryId: 1 } }],\r\n          },\r\n        },\r\n        {\r\n          $lookup: {\r\n            from: 'feedbacks',\r\n            localField: '_id',\r\n            foreignField: 'mentorId',\r\n            as: 'feedbacks',\r\n          },\r\n        },\r\n        {\r\n          $addFields: {\r\n            avgRating: { $avg: '$feedbacks.rating' },\r\n            feedbackCount: { $size: '$feedbacks' },\r\n          },\r\n        },\r\n      ];\r\n\r\n      if (skill || category) {\r\n        pipeline.push({\r\n          $lookup: {\r\n            from: 'subcategories',\r\n            localField: 'skills.subcategoryId',\r\n            foreignField: '_id',\r\n            as: 'subcategories',\r\n          },\r\n        });\r\n        pipeline.push({\r\n          $lookup: {\r\n            from: 'categories',\r\n            localField: 'subcategories.categoryId',\r\n            foreignField: '_id',\r\n            as: 'categories',\r\n          },\r\n        });\r\n\r\n        const filterStage: Record<string, any> = {};\r\n        if (skill) {\r\n          filterStage['skills.name'] = { $regex: `^${skill}$`, $options: 'i' };\r\n          logger.info(`Applying skill filter: ${skill}`);\r\n        }\r\n        if (category) {\r\n          filterStage['categories.name'] = { $regex: `^${category}$`, $options: 'i' };\r\n          logger.info(`Applying category filter: ${category}`);\r\n        }\r\n        if (skill || category) {\r\n          pipeline.push({ $match: filterStage });\r\n        }\r\n      }\r\n\r\n      pipeline.push({ $match: matchStage });\r\n\r\n      pipeline.push({\r\n      $addFields: {\r\n        id: '$_id',\r\n      },\r\n    });\r\n\r\n      pipeline.push({\r\n        $project: {\r\n          _id: 0,\r\n          id: 1,\r\n          'userId._id':1,\r\n          'userId.name': 1,\r\n          'userId.email': 1,\r\n          'userId.profilePic': 1,\r\n          'skills._id': 1,\r\n          'skills.name': 1,\r\n          'skills.subcategoryId': 1,\r\n          'categories.name': 1,\r\n          price: 1,\r\n          avgRating: 1,\r\n          feedbackCount: 1,\r\n          specialization: 1,\r\n          timePeriod: 1,\r\n          availableSlots: 1,\r\n        },\r\n      });\r\n\r\n      const sortStage: Record<string, any> = {};\r\n      if (sortBy === 'rating') {\r\n        sortStage.avgRating = sortOrder === 'asc' ? 1 : -1;\r\n        sortStage.feedbackCount = -1;\r\n      } else if (sortBy === 'price') {\r\n        sortStage.price = sortOrder === 'asc' ? 1 : -1;\r\n      } else if (sortBy === 'feedbackCount') {\r\n        sortStage.feedbackCount = sortOrder === 'asc' ? 1 : -1;\r\n        sortStage.avgRating = -1;\r\n      } else {\r\n        sortStage['userId.name'] = sortOrder === 'asc' ? 1 : -1;\r\n      }\r\n      pipeline.push({ $sort: sortStage });\r\n\r\n      pipeline.push({\r\n        $facet: {\r\n          mentors: [{ $skip: (page - 1) * limit }, { $limit: limit }],\r\n          total: [{ $count: 'count' }],\r\n        },\r\n      });\r\n      const result = await this.model.aggregate(pipeline).exec();\r\n      const mentors = result[0]?.mentors || [];\r\n      const total = result[0]?.total[0]?.count || 0;\r\n\r\n      logger.info(`Fetched ${mentors.length} mentors, total: ${total}`);\r\n      return { mentors, total };\r\n    } catch (error: unknown) {\r\n      const err = error instanceof Error ? error : new Error(String(error));\r\n      logger.error(`Error fetching mentors`, err);\r\n      throw new RepositoryError('Error fetching mentors', StatusCodes.INTERNAL_SERVER_ERROR, err);\r\n    }\r\n  }\r\n\r\n  public getMentorDetails = async (id: string): Promise<IMentor | null> => {\r\n    try {\r\n      logger.debug(`Fetching mentor details for ID: ${id}`);\r\n      const mentor = await this.model\r\n        .findById(this.toObjectId(id))\r\n        .populate(\"userId\")\r\n        .populate(\"skills\")\r\n        .exec();\r\n      logger.info(`Mentor details ${mentor ? 'found' : 'not found'}: ${id}`);\r\n      return mentor;\r\n    } catch (error: unknown) {\r\n      const err = error instanceof Error ? error : new Error(String(error));\r\n      logger.error(`Error fetching mentor details for ID ${id}`, err);\r\n      throw new RepositoryError('Error fetching mentor details', StatusCodes.INTERNAL_SERVER_ERROR, err);\r\n    }\r\n  }\r\n\r\n  public approveMentorRequest = async (id: string): Promise<IMentor | null> => {\r\n    try {\r\n      logger.debug(`Approving mentor request: ${id}`);\r\n      const updatedMentor = await this.model\r\n        .findByIdAndUpdate(\r\n          this.toObjectId(id),\r\n          { isApproved: \"Completed\" },\r\n          { new: true }\r\n        )\r\n        .exec();\r\n      if (!updatedMentor) {\r\n        logger.warn(`Mentor not found: ${id}`);\r\n        throw new RepositoryError(`Mentor not found with ID: ${id}`, StatusCodes.NOT_FOUND);\r\n      }\r\n      logger.info(`Mentor request approved: ${id}`);\r\n      return updatedMentor;\r\n    } catch (error: unknown) {\r\n      const err = error instanceof Error ? error : new Error(String(error));\r\n      logger.error(`Error approving mentor request for ID ${id}`, err);\r\n      throw new RepositoryError('Error approving mentor request', StatusCodes.INTERNAL_SERVER_ERROR, err);\r\n    }\r\n  }\r\n\r\n  public rejectMentorRequest = async (id: string): Promise<IMentor | null> => {\r\n    try {\r\n      logger.debug(`Rejecting mentor request: ${id}`);\r\n      const updatedMentor = await this.model\r\n        .findByIdAndUpdate(\r\n          this.toObjectId(id),\r\n          { isApproved: \"Rejected\" },\r\n          { new: true }\r\n        )\r\n        .exec();\r\n      if (!updatedMentor) {\r\n        logger.warn(`Mentor not found: ${id}`);\r\n        throw new RepositoryError(`Mentor not found with ID: ${id}`, StatusCodes.NOT_FOUND);\r\n      }\r\n      logger.info(`Mentor request rejected: ${id}`);\r\n      return updatedMentor;\r\n    } catch (error: unknown) {\r\n      const err = error instanceof Error ? error : new Error(String(error));\r\n      logger.error(`Error rejecting mentor request for ID ${id}`, err);\r\n      throw new RepositoryError('Error rejecting mentor request', StatusCodes.INTERNAL_SERVER_ERROR, err);\r\n    }\r\n  }\r\n\r\n  public cancelMentorship = async (id: string, options?: { session?: ClientSession }): Promise<IMentor | null> => {\r\n    try {\r\n      logger.debug(`Cancelling mentorship: ${id}`);\r\n      const updatedMentor = await this.model\r\n        .findByIdAndUpdate(\r\n          this.toObjectId(id),\r\n          { isApproved: \"Processing\" },\r\n          { new: true, session: options?.session }\r\n        )\r\n        .exec();\r\n      if (!updatedMentor) {\r\n        logger.warn(`Mentor not found: ${id}`);\r\n        throw new RepositoryError(`Mentor not found with ID: ${id}`, StatusCodes.NOT_FOUND);\r\n      }\r\n      logger.info(`Mentorship cancelled: ${id}`);\r\n      return updatedMentor;\r\n    } catch (error: unknown) {\r\n      const err = error instanceof Error ? error : new Error(String(error));\r\n      logger.error(`Error cancelling mentorship for ID ${id}`, err);\r\n      throw new RepositoryError('Error cancelling mentorship', StatusCodes.INTERNAL_SERVER_ERROR, err);\r\n    }\r\n  }\r\n\r\n  public getMentorById = async (id: string): Promise<IMentor | null> => {\r\n    try {\r\n      logger.debug(`Fetching mentor by ID: ${id}`);\r\n      const mentor = await this.model\r\n        .findById(this.toObjectId(id))\r\n        .populate(\"userId\", \"_id name email profilePic coverPic\")\r\n        .populate(\"skills\", \"_id name\")\r\n        .exec();\r\n      logger.info(`Mentor ${mentor ? 'found' : 'not found'}: ${id}`);\r\n      return mentor;\r\n    } catch (error: unknown) {\r\n      const err = error instanceof Error ? error : new Error(String(error));\r\n      logger.error(`Error fetching mentor by ID ${id}`, err);\r\n      throw new RepositoryError('Error fetching mentor by ID', StatusCodes.INTERNAL_SERVER_ERROR, err);\r\n    }\r\n  }\r\n\r\n  public getMentorByUserId = async (userId: string): Promise<IMentor | null> => {\r\n    try {\r\n      logger.debug(`Fetching mentor by user ID: ${userId}`);\r\n      const mentor = await this.model\r\n        .findOne({ userId: this.toObjectId(userId) })\r\n        .populate(\"userId\")\r\n        .populate(\"skills\")\r\n        .exec();\r\n      logger.info(`Mentor ${mentor ? 'found' : 'not found'} for userId: ${userId}`);\r\n      return mentor;\r\n    } catch (error: unknown) {\r\n      const err = error instanceof Error ? error : new Error(String(error));\r\n      logger.error(`Error fetching mentor by user ID ${userId}`, err);\r\n      throw new RepositoryError('Error fetching mentor by user ID', StatusCodes.INTERNAL_SERVER_ERROR, err);\r\n    }\r\n  }\r\n\r\n  public updateMentorById = async (\r\n    mentorId: string,\r\n    updateData: Partial<IMentor>\r\n  ): Promise<IMentor | null> => {\r\n    try {\r\n      logger.debug(`Updating mentor: ${mentorId}`);\r\n      const updatedMentor = await this.findByIdAndUpdate(mentorId, updateData, { new: true });\r\n      if (!updatedMentor) {\r\n        logger.warn(`Mentor not found: ${mentorId}`);\r\n        throw new RepositoryError(`Mentor not found with ID: ${mentorId}`, StatusCodes.NOT_FOUND);\r\n      }\r\n      logger.info(`Mentor updated: ${mentorId}`);\r\n      return updatedMentor;\r\n    } catch (error: unknown) {\r\n      const err = error instanceof Error ? error : new Error(String(error));\r\n      logger.error(`Error updating mentor ${mentorId}`, err);\r\n      throw new RepositoryError('Error updating mentor', StatusCodes.INTERNAL_SERVER_ERROR, err);\r\n    }\r\n  }\r\n\r\n \r\n}\r\n"]}