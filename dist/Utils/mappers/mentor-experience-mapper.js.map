{"version":3,"file":"mentor-experience-mapper.js","sourceRoot":"","sources":["../../../src/Utils/mappers/mentor-experience-mapper.ts"],"names":[],"mappings":";;;;;AAKA,sDAiCC;AAED,wDAkBC;AA1DD,uCAAiC;AAGjC,qEAA6C;AAE7C,SAAgB,qBAAqB,CACnC,UAAoC;IAEpC,IAAI,CAAC,UAAU,EAAE,CAAC;QAChB,gBAAM,CAAC,IAAI,CAAC,gDAAgD,CAAC,CAAC;QAC9D,OAAO,IAAI,CAAC;IACd,CAAC;IAED,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC;QACpB,gBAAM,CAAC,KAAK,CAAC,iCAAiC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;QAC5E,OAAO,IAAI,CAAC;IACd,CAAC;IAED,MAAM,EAAE,GAAG,UAAU,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;IAErC,MAAM,GAAG,GAAyB;QAChC,EAAE;QACF,kBAAkB,EAAE,UAAU,CAAC,kBAAkB;QACjD,QAAQ,EAAE,UAAU,CAAC,QAAQ,YAAY,gBAAK,CAAC,QAAQ;YACrD,CAAC,CAAC,UAAU,CAAC,QAAQ,CAAC,QAAQ,EAAE;YAChC,CAAC,CAAC,UAAU,CAAC,QAAQ;QACvB,IAAI,EAAE,UAAU,CAAC,IAAI;QACrB,YAAY,EAAE,UAAU,CAAC,YAAY;QACrC,SAAS,EAAE,UAAU,CAAC,SAAS;QAC/B,OAAO,EAAE,UAAU,CAAC,OAAO,IAAI,IAAI;QACnC,SAAS,EAAE,UAAU,CAAC,SAAS;QAC/B,WAAW,EAAE,UAAU,CAAC,WAAW,IAAI,IAAI;QAC3C,SAAS,EAAE,UAAU,CAAC,SAAS,IAAI,IAAI,IAAI,EAAE;QAC7C,SAAS,EAAE,UAAU,CAAC,SAAS,IAAI,IAAI,IAAI,EAAE;KAC9C,CAAC;IAEF,gBAAM,CAAC,KAAK,CAAC,iCAAiC,EAAE,EAAE,CAAC,CAAC;IACpD,OAAO,GAAG,CAAC;AACb,CAAC;AAED,SAAgB,sBAAsB,CACpC,WAAgC;IAEhC,gBAAM,CAAC,KAAK,CAAC,WAAW,WAAW,CAAC,MAAM,6BAA6B,CAAC,CAAC;IAEzE,MAAM,IAAI,GAAG,WAAW;SACrB,GAAG,CAAC,CAAC,GAAG,EAAE,KAAK,EAAE,EAAE;QAClB,gBAAM,CAAC,KAAK,CAAC,kCAAkC,KAAK,EAAE,CAAC,CAAC;QACxD,MAAM,GAAG,GAAG,qBAAqB,CAAC,GAAG,CAAC,CAAC;QACvC,IAAI,CAAC,GAAG,EAAE,CAAC;YACT,gBAAM,CAAC,IAAI,CAAC,6CAA6C,KAAK,EAAE,CAAC,CAAC;QACpE,CAAC;QACD,OAAO,GAAG,CAAC;IACb,CAAC,CAAC;SACD,MAAM,CAAC,CAAC,GAAG,EAA+B,EAAE,CAAC,GAAG,KAAK,IAAI,CAAC,CAAC;IAE9D,gBAAM,CAAC,IAAI,CAAC,uBAAuB,IAAI,CAAC,MAAM,yBAAyB,CAAC,CAAC;IACzE,OAAO,IAAI,CAAC;AACd,CAAC","sourcesContent":["import { Types } from 'mongoose';\r\nimport { IMentorExperience } from '../../Interfaces/Models/i-mentor-experience';\r\nimport { IMentorExperienceDTO } from '../../Interfaces/DTOs/i-mentor-experience-dto';\r\nimport logger from '../../core/utils/logger';\r\n\r\nexport function toMentorExperienceDTO(\r\n  experience: IMentorExperience | null\r\n): IMentorExperienceDTO | null {\r\n  if (!experience) {\r\n    logger.warn('Attempted to map null mentor experience to DTO');\r\n    return null;\r\n  }\r\n\r\n  if (!experience._id) {\r\n    logger.error(`Mentor experience has no _id: ${JSON.stringify(experience)}`);\r\n    return null;\r\n  }\r\n\r\n  const id = experience._id.toString();\r\n\r\n  const dto: IMentorExperienceDTO = {\r\n    id,\r\n    mentorExperienceId: experience.mentorExperienceId,\r\n    mentorId: experience.mentorId instanceof Types.ObjectId\r\n      ? experience.mentorId.toString()\r\n      : experience.mentorId,\r\n    role: experience.role,\r\n    organization: experience.organization,\r\n    startDate: experience.startDate,\r\n    endDate: experience.endDate || null,\r\n    isCurrent: experience.isCurrent,\r\n    description: experience.description || null,\r\n    createdAt: experience.createdAt || new Date(),\r\n    updatedAt: experience.updatedAt || new Date(),\r\n  };\r\n\r\n  logger.debug(`Mapped mentor experience DTO: ${id}`);\r\n  return dto;\r\n}\r\n\r\nexport function toMentorExperienceDTOs(\r\n  experiences: IMentorExperience[]\r\n): IMentorExperienceDTO[] {\r\n  logger.debug(`Mapping ${experiences.length} mentor experiences to DTOs`);\r\n\r\n  const dtos = experiences\r\n    .map((exp, index) => {\r\n      logger.debug(`Processing experience at index ${index}`);\r\n      const dto = toMentorExperienceDTO(exp);\r\n      if (!dto) {\r\n        logger.warn(`Skipping null DTO for experience at index ${index}`);\r\n      }\r\n      return dto;\r\n    })\r\n    .filter((dto): dto is IMentorExperienceDTO => dto !== null);\r\n\r\n  logger.info(`Successfully mapped ${dtos.length} mentor experience DTOs`);\r\n  return dtos;\r\n}"]}