{"version":3,"file":"auth-controller.js","sourceRoot":"","sources":["../../src/controllers/auth-controller.ts"],"names":[],"mappings":"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","sourcesContent":["import { BaseController } from '../core/controller/base-controller';\r\nimport { inject, injectable } from 'inversify';\r\nimport { Request, Response, NextFunction } from 'express';\r\nimport logger from '../core/utils/logger';\r\nimport { ForgotPasswordRequestBody, \r\n  LoginRequestBody, \r\n  LogoutRequestBody, \r\n  OAuthRequestBody, \r\n  RefreshTokenRequestBody, \r\n  ResetPasswordRequestBody, \r\n  SignupRequestBody, \r\n  UpdateProfileRequestBody, \r\n  VerifyOTPRequestBody, \r\n  VerifyPasskeyRequestBody, \r\n  UpdatePasswordRequestBody, \r\n  UserQuery\r\n} from '../Utils/types/auth-types';\r\nimport { IAuthController } from '../Interfaces/Controller/i-auth-controller';\r\nimport { HttpError } from '../core/utils/error-handler';\r\nimport { StatusCodes } from '../enums/status-code-enums';\r\nimport { IAuthService } from '../Interfaces/Services/i-user-service';\r\nimport { IJWTService } from '../Interfaces/Services/i-jwt-service';\r\nimport { AUTH_MESSAGES } from '../constants/messages';\r\nimport { ERROR_MESSAGES } from '../constants/error-messages';\r\n\r\n@injectable()\r\nexport class AuthController extends BaseController implements IAuthController{\r\n  private _authService: IAuthService;\r\n  private _jwtService: IJWTService;\r\n\r\n  constructor(\r\n    @inject('IUserService') authService : IAuthService,\r\n    @inject('IJWTService') jwtService : IJWTService\r\n  ) {\r\n    super();\r\n    this._authService = authService;\r\n    this._jwtService = jwtService;\r\n  }\r\n\r\n  // Handle user signup\r\n  signup = async (req: Request<{}, {}, SignupRequestBody>, res: Response, next: NextFunction) => {\r\n    try {\r\n      const { name, email, password } = req.body;\r\n      logger.debug(`Signup attempt for email: ${email}`);\r\n      if (!name || !email || !password) {\r\n        throw new HttpError(ERROR_MESSAGES.REQUIRED_NAME_EMAIL_PASSWORD, StatusCodes.BAD_REQUEST);\r\n      }\r\n      const {user, otpId} = await this._authService.signup({ name, email, password });\r\n      this.sendCreated(res, { email: user.email, otpId }, AUTH_MESSAGES.SIGNUP_SUCCESS);\r\n      logger.info(`User registered: ${user.name} (${email})`);\r\n    } catch (error) {\r\n      logger.error(`Error in signup for email ${req.body.email || \"unknown\"}: ${error}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  // Handle user login\r\n  login = async (req: Request<{}, {}, LoginRequestBody>, res: Response, next: NextFunction) => {\r\n    try {\r\n      const { email, password } = req.body;\r\n      logger.debug(`Login attempt for email: ${email}`);\r\n      if (!email || !password) {\r\n        throw new HttpError(ERROR_MESSAGES.REQUIRED_EMAIL_PASSWORD, StatusCodes.BAD_REQUEST);\r\n      }\r\n      const { user, otpId } = await this._authService.login(email, password);\r\n      // this._jwtService.setTokensInCookies(res, accessToken, refreshToken);\r\n      this.sendSuccess(res, { user, otpId }, AUTH_MESSAGES.LOGIN_SUCCESS);\r\n      logger.info(`User logged in otp send for: ${user.userId} (${email})`);\r\n    } catch (error) {\r\n      logger.error(`Error in login for email ${req.body.email || \"unknown\"}: ${error}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  // Handle Google signup\r\n  googleSignup = async (req: Request<{}, {}, OAuthRequestBody>, res: Response, next: NextFunction) => {\r\n    try {\r\n      const { code } = req.body;\r\n      logger.debug(`Google signup attempt with code: ${code}`);\r\n      if (!code) {\r\n        throw new HttpError(ERROR_MESSAGES.REQUIRED_AUTH_CODE, StatusCodes.BAD_REQUEST);\r\n      }\r\n      const {user, otpId} = await this._authService.googleSignup(code);\r\n      this.sendCreated(res, { email: user.email, otpId }, AUTH_MESSAGES.GOOGLE_SIGNUP_SUCCESS);\r\n      logger.info(`Google signup completed for user: ${user.userId} (${user.email})`);\r\n    } catch (error) {\r\n      logger.error(`Error in Google signup: ${error}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  // Handle Google login\r\n  googleLogin = async (req: Request<{}, {}, OAuthRequestBody>, res: Response, next: NextFunction) => {\r\n    try {\r\n      const { code } = req.body;\r\n      logger.debug(`Google login attempt with code: ${code}`);\r\n      if (!code) {\r\n        throw new HttpError(ERROR_MESSAGES.REQUIRED_AUTH_CODE, StatusCodes.BAD_REQUEST);\r\n      }\r\n      const { user, otpId } = await this._authService.googleLogin(code);\r\n      this.sendSuccess(res, { user, otpId }, AUTH_MESSAGES.GOOGLE_LOGIN_SUCCESS);\r\n      logger.info(`Google login completed for user: ${user.userId} (${user.email})`);\r\n    } catch (error) {\r\n      logger.error(`Error in Google login: ${error}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  // Handle GitHub signup\r\n  githubSignup = async (req: Request<{}, {}, OAuthRequestBody>, res: Response, next: NextFunction) => {\r\n    try {\r\n      const { code } = req.body;\r\n      logger.debug(`GitHub signup attempt with code: ${code}`);\r\n      if (!code) {\r\n        throw new HttpError(ERROR_MESSAGES.REQUIRED_AUTH_CODE, StatusCodes.BAD_REQUEST);\r\n      }\r\n      const{ user, otpId } = await this._authService.githubSignup(code);\r\n      this.sendCreated(res, { email: user.email, otpId }, AUTH_MESSAGES.GITHUB_SIGNUP_SUCCESS);\r\n      logger.info(`GitHub signup completed for user: ${user.userId} (${user.email})`);\r\n    } catch (error) {\r\n      logger.error(`Error in GitHub signup: ${error}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  // Handle GitHub login\r\n  githubLogin = async (req: Request<{}, {}, OAuthRequestBody>, res: Response, next: NextFunction) => {\r\n    try {\r\n      const { code } = req.body;\r\n      logger.debug(`GitHub login attempt with code: ${code}`);\r\n      if (!code) {\r\n        throw new HttpError(ERROR_MESSAGES.REQUIRED_AUTH_CODE, StatusCodes.BAD_REQUEST);\r\n      }\r\n      const { user, otpId } = await this._authService.githubLogin(code);\r\n      this.sendSuccess(res, { user, otpId }, AUTH_MESSAGES.GITHUB_LOGIN_SUCCESS);\r\n      logger.info(`GitHub login completed for user: ${user.userId} (${user.email})`);\r\n    } catch (error) {\r\n      logger.error(`Error in GitHub login: ${error}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  // Handle refresh token\r\n  refreshToken = async (req: Request<{}, {}, RefreshTokenRequestBody>, res: Response, next: NextFunction) => {\r\n    try {\r\n      const { refreshToken } = req.body;\r\n      logger.debug(`Refresh token attempt`);\r\n      if (!refreshToken) {\r\n        throw new HttpError(ERROR_MESSAGES.REQUIRED_REFRESH_TOKEN, StatusCodes.BAD_REQUEST);\r\n      }\r\n      const { newAccessToken } = await this._authService.refreshToken(refreshToken);\r\n      res.cookie(\"accessToken\", newAccessToken, {\r\n        httpOnly: true,\r\n        secure: process.env.NODE_ENV === \"production\",\r\n        sameSite: \"strict\",\r\n        maxAge: 15 * 60 * 1000,\r\n      });\r\n      this.sendSuccess(res, { newAccessToken }, AUTH_MESSAGES.REFRESH_SUCCESS);\r\n      logger.info(`Access token refreshed`);\r\n    } catch (error) {\r\n      logger.error(`Error in refresh token: ${error}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  // Check profile completion\r\n  checkProfile = async (req: Request<{ id: string }>, res: Response, next: NextFunction) => {\r\n    try {\r\n      const userId = req.params.id;\r\n      logger.debug(`Checking profile completion for userId: ${userId}`);\r\n      if (!userId) {\r\n        throw new HttpError(ERROR_MESSAGES.REQUIRED_USER_ID, StatusCodes.BAD_REQUEST);\r\n      }\r\n      const isComplete = await this._authService.checkProfileCompletion(userId);\r\n      this.sendSuccess(res, { isProfileComplete: isComplete }, AUTH_MESSAGES.PROFILE_CHECKED);\r\n      logger.info(`Profile completion checked for userId: ${userId}: ${isComplete}`);\r\n    } catch (error) {\r\n      logger.error(`Error checking profile for userId ${req.params.id || \"unknown\"}: ${error}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  // Get profile details\r\n  getProfileDetails = async (req: Request<{ id: string }>, res: Response, next: NextFunction) => {\r\n    try {\r\n      const userId = req.params.id;\r\n      logger.debug(`Fetching profile details for userId: ${userId}`);\r\n      if (!userId) {\r\n        throw new HttpError(ERROR_MESSAGES.REQUIRED_USER_ID, StatusCodes.BAD_REQUEST);\r\n      }\r\n      const userDetails = await this._authService.profileDetails(userId);\r\n      if (!userDetails) {\r\n        this.sendSuccess(res, { userDetails: null }, AUTH_MESSAGES.NO_USER_FOUND);\r\n        logger.info(`No user found for ID: ${userId}`);\r\n        return;\r\n      }\r\n      this.sendSuccess(res, { userDetails }, AUTH_MESSAGES.PROFILE_FETCHED);\r\n      logger.info(`Profile details fetched for userId: ${userId}`);\r\n    } catch (error) {\r\n      logger.error(`Error fetching profile details for userId ${req.params.id || \"unknown\"}: ${error}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  // Update user profile\r\n  updateUserDetails = async (\r\n    req: Request<{ id: string }, {}, UpdateProfileRequestBody>,\r\n    res: Response,\r\n    next: NextFunction\r\n  ) => {\r\n    try {\r\n      const userId = req.params.id;\r\n      logger.debug(`Updating profile for userId: ${userId}`);\r\n      if (!userId) {\r\n        throw new HttpError(ERROR_MESSAGES.REQUIRED_USER_ID, StatusCodes.BAD_REQUEST);\r\n      }\r\n      const data: UpdateProfileRequestBody = req.body;\r\n      const profilePicFile = req.files ?.[\"profilePic\"]?.[0];\r\n      const coverPicFile = req.files ?.[\"coverPic\"]?.[0];\r\n      if (profilePicFile) data.profilePicFile = profilePicFile;\r\n      if (coverPicFile) data.coverPicFile = coverPicFile;\r\n      const updatedUser = await this._authService.updateUserProfile(userId, data);\r\n      this.sendSuccess(res, { user: updatedUser }, AUTH_MESSAGES.PROFILE_UPDATED);\r\n      logger.info(`Profile updated for userId: ${userId}`);\r\n    } catch (error) {\r\n      logger.error(`Error updating profile for userId ${req.params.id || \"unknown\"}: ${error}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  // Update user password\r\n  updatePassword = async (\r\n    req: Request<{ id: string }, {}, UpdatePasswordRequestBody>,\r\n    res: Response,\r\n    next: NextFunction\r\n  ) => {\r\n    try {\r\n      const userId = req.params.id;\r\n      logger.debug(`Updating password for userId: ${userId}`);\r\n      if (!userId) {\r\n        throw new HttpError(ERROR_MESSAGES.REQUIRED_USER_ID, StatusCodes.BAD_REQUEST);\r\n      }\r\n      const { currentPassword, newPassword } = req.body;\r\n      if (!currentPassword || !newPassword) {\r\n        throw new HttpError(ERROR_MESSAGES.REQUIRED_CURRENT_NEW_PASSWORD, StatusCodes.BAD_REQUEST);\r\n      }\r\n      const updatedUser = await this._authService.updatePassword(userId, currentPassword, newPassword);\r\n      this.sendSuccess(res, { user: updatedUser }, AUTH_MESSAGES.PASSWORD_UPDATED);\r\n      logger.info(`Password updated for userId: ${userId}`);\r\n    } catch (error) {\r\n      logger.error(`Error updating password for userId ${req.params.id || \"unknown\"}: ${error}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  // Handle logout\r\n  logout = async (req: Request<{}, {}, LogoutRequestBody>, res: Response, next: NextFunction) => {\r\n    try {\r\n      const { email } = req.body;\r\n      logger.debug(`Logout attempt for email: ${email}`);\r\n      if (!email) {\r\n        throw new HttpError(ERROR_MESSAGES.REQUIRED_EMAIL, StatusCodes.BAD_REQUEST);\r\n      }\r\n      await this._authService.logout(email);\r\n      this._jwtService.clearCookies(res);\r\n      this.sendSuccess(res, {}, AUTH_MESSAGES.LOGOUT_SUCCESS);\r\n      logger.info(`User logged out: ${email}`);\r\n    } catch (error) {\r\n      logger.error(`Error in logout for email ${req.body.email || \"unknown\"}: ${error}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  // Handle forgot password\r\n  handleForgotPassword = async (req: Request<{}, {}, ForgotPasswordRequestBody>, res: Response, next: NextFunction) => {\r\n    try {\r\n      const { email } = req.body;\r\n      logger.debug(`Forgot password request for email: ${email}`);\r\n      if (!email) {\r\n        throw new HttpError(ERROR_MESSAGES.REQUIRED_EMAIL, StatusCodes.BAD_REQUEST);\r\n      }\r\n      const otpId = await this._authService.forgotPassword(email);\r\n      this.sendSuccess(res, { otpId }, AUTH_MESSAGES.OTP_SENT);\r\n      logger.info(`OTP sent to email: ${email}`);\r\n    } catch (error) {\r\n      logger.error(`Error in forgot password for email ${req.body.email || \"unknown\"}: ${error}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  // Handle verify OTP\r\n  handleVerifyOTP = async (req: Request<{}, {}, VerifyOTPRequestBody>, res: Response, next: NextFunction) => {\r\n    try {\r\n      const { purpose, email, otpId, otp } = req.body;\r\n      logger.debug(`Verify OTP attempt for email: ${email}`);\r\n      if (!email || !otp) {\r\n        throw new HttpError(ERROR_MESSAGES.REQUIRED_EMAIL_OTP, StatusCodes.BAD_REQUEST);\r\n      }\r\n      const result = await this._authService.verifyOTP(purpose, email, otpId, otp);\r\n      if (result.purpose === \"login\") {\r\n        this._jwtService.setTokensInCookies(\r\n          res,\r\n          result.accessToken,\r\n          result.refreshToken\r\n        );\r\n      }\r\n\r\n      this.sendSuccess(res, result, AUTH_MESSAGES.OTP_VERIFIED);\r\n      logger.info(`OTP verified for email: ${email}`);\r\n    } catch (error) {\r\n      logger.error(`Error verifying OTP for email ${req.body.email || \"unknown\"}: ${error}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  resendOtp = async (req: Request, res: Response, next: NextFunction) => {\r\n  try {\r\n    const { email, purpose } = req.body;\r\n    if (!email || !purpose) {\r\n      throw new HttpError( ERROR_MESSAGES.REQUIRED_EMAIL_AND_PURPOSE, StatusCodes.BAD_REQUEST );\r\n    }\r\n    const { otpId } = await this._authService.resendOtp(email, purpose);\r\n    this.sendSuccess( res, { otpId },  AUTH_MESSAGES.OTP_SENT );\r\n  } catch (error) {\r\n    next(error);\r\n  }\r\n};\r\n\r\n  // Handle reset password\r\n  handleResetPassword = async (req: Request<{}, {}, ResetPasswordRequestBody>, res: Response, next: NextFunction) => {\r\n    try {\r\n      const { email, newPassword } = req.body;\r\n      logger.debug(`Reset password attempt for email: ${email}`);\r\n      if (!email || !newPassword) {\r\n        throw new HttpError(ERROR_MESSAGES.REQUIRED_EMAIL_NEW_PASSWORD, StatusCodes.BAD_REQUEST);\r\n      }\r\n      await this._authService.resetPassword(email, newPassword);\r\n      this.sendSuccess(res, {}, AUTH_MESSAGES.PASSWORD_RESET);\r\n      logger.info(`Password reset for email: ${email}`);\r\n    } catch (error) {\r\n      logger.error(`Error resetting password for email ${req.body.email || \"unknown\"}: ${error}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  // Verify admin passkey\r\n  verifyPasskey = async (req: Request<{}, {}, VerifyPasskeyRequestBody>, res: Response, next: NextFunction) => {\r\n    try {\r\n      const { passkey } = req.body;\r\n      logger.debug(`Verify admin passkey attempt`);\r\n      if (!passkey) {\r\n        throw new HttpError(ERROR_MESSAGES.REQUIRED_PASSKEY, StatusCodes.BAD_REQUEST);\r\n      }\r\n      const isValid = await this._authService.verifyAdminPasskey(passkey);\r\n      this.sendSuccess(res, { valid: isValid }, AUTH_MESSAGES.PASSKEY_VERIFIED);\r\n      logger.info(`Admin passkey verification: ${isValid}`);\r\n    } catch (error) {\r\n      logger.error(`Error verifying admin passkey: ${error}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  // Get all User Details\r\n  getAllUsers = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { search, page, limit, excludeId } = req.query;\r\n      const query: UserQuery = {};\r\n\r\n      if (search) query.search = search as string;\r\n      if (page) query.page = parseInt(page as string, 10);\r\n      if (limit) query.limit = parseInt(limit as string, 10);\r\n      if (excludeId) query.excludeId = excludeId as string;\r\n\r\n      logger.debug(`Fetching users with query: ${JSON.stringify(query)}`);\r\n      const result = await this._authService.getAllUsers(query);\r\n\r\n      const data = {\r\n        users: result.users,\r\n        total: result.total,\r\n        page: query.page || 1,\r\n        limit: query.limit || 10,\r\n      };\r\n\r\n      if (result.users.length === 0) {\r\n        this.sendSuccess(res, { users: [], total: 0, page: query.page || 1, limit: query.limit || 10 }, AUTH_MESSAGES.NO_USERS_FOUND);\r\n      } else if (!search && !page && !limit) {\r\n        this.sendSuccess(res, { users: result.users }, AUTH_MESSAGES.USERS_FETCHED);\r\n      } else {\r\n        this.sendSuccess(res, data, AUTH_MESSAGES.USERS_FETCHED);\r\n      }\r\n      logger.info(\"Users fetched successfully\");\r\n    } catch (error: any) {\r\n      logger.error(`Error in getAllUsers: ${error.message}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  fetchAllUsers = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n\r\n      const { search, page, limit, excludeId, status } = req.query;\r\n      const query: UserQuery = {};\r\n\r\n      if (search) query.search = search as string;\r\n      if (page) query.page = parseInt(page as string, 10);\r\n      if (limit) query.limit = parseInt(limit as string, 10);\r\n      if (excludeId) query.excludeId = excludeId as string;\r\n      if (status) query.status = status as string;\r\n\r\n      logger.debug(`Fetching users with query: ${JSON.stringify(query)}`);\r\n      const result = await this._authService.getAllUsersAdmin(query);\r\n\r\n      const data = {\r\n        users: result.users,\r\n        total: result.total,\r\n        page: query.page || 1,\r\n        limit: query.limit || 10,\r\n      };\r\n\r\n      if (result.users.length === 0) {\r\n        this.sendSuccess(res, { users: [], total: 0, page: query.page || 1, limit: query.limit || 10 }, AUTH_MESSAGES.NO_USERS_FOUND);\r\n      } else if (!search && !page && !limit) {\r\n        this.sendSuccess(res, { users: result.users }, AUTH_MESSAGES.USERS_FETCHED);\r\n      } else {\r\n        this.sendSuccess(res, data, AUTH_MESSAGES.USERS_FETCHED);\r\n      }\r\n      logger.info(\"Users fetched successfully\");\r\n    } catch (error) {\r\n      logger.info(error);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  // Get user Details by Id\r\n  getUserById = async (req: Request<{ id: string }>, res: Response, next: NextFunction) => {\r\n    try {\r\n      const { id } = req.params;\r\n      logger.debug(`Fetching user by ID: ${id}`);\r\n      if (!id) {\r\n        throw new HttpError(ERROR_MESSAGES.REQUIRED_USER_ID, StatusCodes.BAD_REQUEST);\r\n      }\r\n      const user = await this._authService.profileDetails(id);\r\n      if (!user) {\r\n        this.sendSuccess(res, { user: null }, AUTH_MESSAGES.NO_USER_FOUND);\r\n        logger.info(`No user found for ID: ${id}`);\r\n        return;\r\n      }\r\n      this.sendSuccess(res, { user }, AUTH_MESSAGES.USER_FETCHED);\r\n      logger.info(`Fetched user: ${id}`);\r\n    } catch (error) {\r\n      logger.error(`Error fetching user ${req.params.id || \"unknown\"}: ${error}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  // Block the given User\r\n  blockUser = async (req: Request<{ id: string }>, res: Response, next: NextFunction) => {\r\n    try {\r\n      const { id } = req.params;\r\n      logger.debug(`Blocking user: ${id}`);\r\n      if (!id) {\r\n        throw new HttpError(ERROR_MESSAGES.REQUIRED_USER_ID, StatusCodes.BAD_REQUEST);\r\n      }\r\n      await this._authService.blockUser(id);\r\n      this.sendSuccess(res, {}, AUTH_MESSAGES.USER_BLOCKED);\r\n      logger.info(`Blocked user: ${id}`);\r\n    } catch (error) {\r\n      logger.error(`Error blocking user ${req.params.id || \"unknown\"}: ${error}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  // Unblock the given user\r\n  unblockUser = async (req: Request<{ id: string }>, res: Response, next: NextFunction) => {\r\n    try {\r\n      const { id } = req.params;\r\n      logger.debug(`Unblocking user: ${id}`);\r\n      if (!id) {\r\n        throw new HttpError(ERROR_MESSAGES.REQUIRED_USER_ID, StatusCodes.BAD_REQUEST);\r\n      }\r\n      await this._authService.unblockUser(id);\r\n      this.sendSuccess(res, {}, AUTH_MESSAGES.USER_UNBLOCKED);\r\n      logger.info(`Unblocked user: ${id}`);\r\n    } catch (error) {\r\n      logger.error(`Error unblocking user ${req.params.id || \"unknown\"}: ${error}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  // Change the user role\r\n  changeRole = async (req: Request<{ id: string }, {}, { role: string }>, res: Response, next: NextFunction) => {\r\n    try {\r\n      const { id } = req.params;\r\n      const { role } = req.body;\r\n      logger.debug(`Changing role for user: ${id} to ${role}`);\r\n      if (!id || !role) {\r\n        throw new HttpError(ERROR_MESSAGES.REQUIRED_USER_ID_ROLE, StatusCodes.BAD_REQUEST);\r\n      }\r\n      const updatedUser = await this._authService.changeRole(id, role);\r\n      this.sendSuccess(res, { user: updatedUser }, AUTH_MESSAGES.ROLE_CHANGED);\r\n      logger.info(`Updated role for user: ${id} to ${role}`);\r\n    } catch (error) {\r\n      logger.error(`Error changing role for user ${req.params.id || \"unknown\"}: ${error}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  getAllUsersAdmin = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { search, page, limit } = req.query;\r\n      const query: UserQuery = {};\r\n\r\n      if (search) query.search = search as string;\r\n      if (page) query.page = parseInt(page as string, 10);\r\n      if (limit) query.limit = parseInt(limit as string, 10);\r\n\r\n      logger.debug(`Fetching users for admin with query: ${JSON.stringify(query)}`);\r\n      const result = await this._authService.getAllUsersAdmin(query);\r\n\r\n      const data = {\r\n        users: result.users,\r\n        total: result.total,\r\n        page: query.page || 1,\r\n        limit: query.limit || 10,\r\n      };\r\n\r\n      if (result.users.length === 0) {\r\n        this.sendSuccess(res, { users: [], total: 0, page: query.page || 1, limit: query.limit || 10 }, AUTH_MESSAGES.NO_USERS_FOUND);\r\n      } else {\r\n        this.sendSuccess(res, data, AUTH_MESSAGES.USERS_ADMIN_FETCHED);\r\n      }\r\n      logger.info(\"Users fetched successfully for admin\");\r\n    } catch (error: any) {\r\n      logger.error(`Error in getAllUsersAdmin: ${error.message}`);\r\n      next(error);\r\n    }\r\n  };\r\n}"]}