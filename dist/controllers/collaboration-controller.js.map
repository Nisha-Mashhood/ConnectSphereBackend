{"version":3,"file":"collaboration-controller.js","sourceRoot":"","sources":["../../src/controllers/collaboration-controller.ts"],"names":[],"mappings":"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","sourcesContent":["import { Request, Response, NextFunction } from \"express\";\r\nimport { BaseController } from \"../core/controller/base-controller\";\r\nimport MentorRequest from \"../Models/mentor-requset-model\";\r\nimport { IMentorRequest } from \"../Interfaces/Models/i-mentor-request\";\r\nimport logger from \"../core/utils/logger\";\r\nimport { ICollaborationController } from \"../Interfaces/Controller/i-collaboration-controller\";\r\nimport { HttpError } from \"../core/utils/error-handler\";\r\nimport { StatusCodes } from \"../enums/status-code-enums\";\r\nimport { ICollaborationService } from \"../Interfaces/Services/i-collaboration-service\";\r\nimport { inject, injectable } from \"inversify\";\r\nimport { COLLABORATION_MESSAGES } from \"../constants/messages\";\r\nimport { ERROR_MESSAGES } from \"../constants/error-messages\";\r\n\r\n@injectable()\r\nexport class CollaborationController extends BaseController implements ICollaborationController{\r\n  private _collabService: ICollaborationService;\r\n\r\n  constructor(@inject('ICollaborationService') collaborationService : ICollaborationService) {\r\n    super();\r\n    this._collabService = collaborationService;\r\n  }\r\n\r\n  TemporaryRequestController = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { mentorId, userId, selectedSlot, price, timePeriod } = req.body;\r\n      logger.info(req.body);\r\n\r\n      const requestData = { mentorId, userId, selectedSlot, price, timePeriod };\r\n      const newRequest = await this._collabService.TemporaryRequestService(requestData);\r\n      this.sendCreated(res, newRequest, COLLABORATION_MESSAGES.REQUEST_CREATED);\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  getMentorRequestsController = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const mentorId = req.query.mentorId as string;\r\n      if (!mentorId) {\r\n        throw new HttpError(ERROR_MESSAGES.MENTOR_ID_REQUIRED, StatusCodes.BAD_REQUEST);\r\n      }\r\n      const mentorRequests = await this._collabService.getMentorRequests(mentorId);\r\n      if (mentorRequests.length === 0) {\r\n        this.sendSuccess(res, { requests: [] }, COLLABORATION_MESSAGES.NO_MENTOR_REQUESTS_FOUND);\r\n        logger.info(`No mentor requests found for mentorId: ${mentorId}`);\r\n        return;\r\n      }\r\n      this.sendSuccess(res, { requests: mentorRequests }, COLLABORATION_MESSAGES.MENTOR_REQUESTS_RETRIEVED);\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  acceptRequestController = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { id } = req.params;\r\n      const request = await this._collabService.acceptRequest(id);\r\n      this.sendSuccess(res, { request }, COLLABORATION_MESSAGES.REQUEST_ACCEPTED);\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  rejectRequestController = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { id } = req.params;\r\n      const request = await this._collabService.rejectRequest(id);\r\n      this.sendSuccess(res, { request }, COLLABORATION_MESSAGES.REQUEST_REJECTED);\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  getRequestForUserController = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { id } = req.params;\r\n      const userRequest = await this._collabService.getRequestForUser(id);\r\n      if (userRequest.length === 0) {\r\n        this.sendSuccess(res, { requests: [] }, COLLABORATION_MESSAGES.NO_REQUESTS_FOUND);\r\n        logger.info(`No mentor requests found for userId: ${id}`);\r\n        return;\r\n      }\r\n      this.sendSuccess(res, { requests: userRequest }, COLLABORATION_MESSAGES.REQUEST_RETRIEVED);\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  makeStripePaymentController = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { paymentMethodId, amount, requestId, email, returnUrl } = req.body;\r\n      if (!returnUrl) {\r\n        throw new HttpError(ERROR_MESSAGES.RETURN_URL_REQUIRED, StatusCodes.BAD_REQUEST);\r\n      }\r\n      const mentorRequestData = await MentorRequest.findById(requestId);\r\n      if (!mentorRequestData) {\r\n        throw new HttpError(ERROR_MESSAGES.MENTOR_REQUEST_NOT_FOUND, StatusCodes.NOT_FOUND);\r\n      }\r\n      const paymentResult = await this._collabService.processPaymentService(\r\n        paymentMethodId,\r\n        amount,\r\n        requestId,\r\n        mentorRequestData as Partial<IMentorRequest>,\r\n        email,\r\n        returnUrl\r\n      );\r\n      const paymentIntent = \"paymentIntent\" in paymentResult ? paymentResult.paymentIntent : paymentResult;\r\n      if (paymentIntent.status === \"requires_action\" && paymentIntent.next_action) {\r\n        this.sendSuccess(res, { status: \"requires_action\", charge: paymentIntent }, COLLABORATION_MESSAGES.PAYMENT_REQUIRES_ACTION);\r\n      } else if (paymentIntent.status === \"succeeded\") {\r\n        this.sendSuccess(\r\n          res,\r\n          { status: \"success\", charge: paymentIntent, contacts: paymentResult.contacts },\r\n          COLLABORATION_MESSAGES.PAYMENT_SUCCEEDED\r\n        );\r\n      } else {\r\n        this.sendSuccess(\r\n          res,\r\n          { status: paymentIntent.status, charge: paymentIntent },\r\n          `${COLLABORATION_MESSAGES.PAYMENT_STATUS}${paymentIntent.status}`\r\n        );\r\n      }\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  getCollabDataForUserController = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { id } = req.params;\r\n      const { includeCompleted } = req.body;\r\n      const collabData = await this._collabService.getCollabDataForUserService(id, includeCompleted);\r\n      if (collabData.length === 0) {\r\n        this.sendSuccess(res, { collabData: [] }, COLLABORATION_MESSAGES.NO_COLLABORATIONS_FOUND);\r\n        logger.info(`No collaborations found for userId: ${id}`);\r\n        return;\r\n      }\r\n      this.sendSuccess(res, { collabData }, COLLABORATION_MESSAGES.COLLABORATION_DATA_RETRIEVED);\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  getCollabDataForMentorController = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { id } = req.params;\r\n      const { includeCompleted} = req.body;\r\n      const collabData = await this._collabService.getCollabDataForMentorService(id, includeCompleted);\r\n      if (collabData.length === 0) {\r\n        this.sendSuccess(res, { collabData: [] }, COLLABORATION_MESSAGES.NO_COLLABORATIONS_FOUND);\r\n        logger.info(`No collaborations found for mentorId: ${id}`);\r\n        return;\r\n      }\r\n      this.sendSuccess(res, { collabData }, COLLABORATION_MESSAGES.COLLABORATION_DATA_RETRIEVED);\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  cancelAndRefundCollab = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { collabId } = req.params;\r\n      const { reason, amount } = req.body;\r\n      logger.info(\"Processing cancellation and refund with data:\", { collabId, reason, amount });\r\n      if (!reason || !amount) {\r\n        throw new HttpError(ERROR_MESSAGES.REASON_AND_AMOUNT_REQUIRED, StatusCodes.BAD_REQUEST);\r\n      }\r\n      const updatedCollab = await this._collabService.cancelAndRefundCollab(collabId, reason, amount);\r\n      this.sendSuccess(res, updatedCollab, COLLABORATION_MESSAGES.COLLABORATION_CANCELLED_WITH_REFUND);\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  getAllMentorRequests = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { page = \"1\", limit = \"10\", search = \"\" } = req.query;\r\n      const parsedPage = parseInt(page as string, 10);\r\n      const parsedLimit = parseInt(limit as string, 10);\r\n      if (isNaN(parsedPage) || parsedPage < 1) {\r\n        throw new HttpError(ERROR_MESSAGES.INVALID_PAGE_NUMBER, StatusCodes.BAD_REQUEST);\r\n      }\r\n      if (isNaN(parsedLimit) || parsedLimit < 1) {\r\n        throw new HttpError(ERROR_MESSAGES.INVALID_LIMIT_VALUE, StatusCodes.BAD_REQUEST);\r\n      }\r\n      logger.debug(`Fetching all mentor requests with page: ${parsedPage}, limit: ${parsedLimit}, search: ${search}`);\r\n      const mentorRequests = await this._collabService.getMentorRequestsService({\r\n        page: parsedPage,\r\n        limit: parsedLimit,\r\n        search: search as string,\r\n      });\r\n      if (mentorRequests.requests.length === 0) {\r\n        this.sendSuccess(\r\n          res,\r\n          { requests: [], total: 0, page: parsedPage, pages: 1 },\r\n          COLLABORATION_MESSAGES.NO_MENTOR_REQUESTS_FOUND\r\n        );\r\n        logger.info(`No mentor requests found for search: ${search}`);\r\n        return;\r\n      }\r\n      this.sendSuccess(res, mentorRequests, COLLABORATION_MESSAGES.MENTOR_REQUESTS_RETRIEVED);\r\n    } catch (error: any) {\r\n      logger.error(`Error fetching all mentor requests: ${error.message}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  getAllCollabs = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { page = \"1\", limit = \"10\", search = \"\" } = req.query;\r\n      const parsedPage = parseInt(page as string, 10);\r\n      const parsedLimit = parseInt(limit as string, 10);\r\n      if (isNaN(parsedPage) || parsedPage < 1) {\r\n        throw new HttpError(ERROR_MESSAGES.INVALID_PAGE_NUMBER, StatusCodes.BAD_REQUEST);\r\n      }\r\n      if (isNaN(parsedLimit) || parsedLimit < 1) {\r\n        throw new HttpError(ERROR_MESSAGES.INVALID_LIMIT_VALUE, StatusCodes.BAD_REQUEST);\r\n      }\r\n      logger.debug(`Fetching all collaborations with page: ${parsedPage}, limit: ${parsedLimit}, search: ${search}`);\r\n      const collaborations = await this._collabService.getCollabsService({\r\n        page: parsedPage,\r\n        limit: parsedLimit,\r\n        search: search as string,\r\n      });\r\n      if (collaborations.collabs.length === 0) {\r\n        this.sendSuccess(\r\n          res,\r\n          { collabs: [], total: 0, page: parsedPage, pages: 1 },\r\n          COLLABORATION_MESSAGES.NO_COLLABORATIONS_FOUND\r\n        );\r\n        logger.info(`No collaborations found for search: ${search}`);\r\n        return;\r\n      }\r\n      this.sendSuccess(res, collaborations, COLLABORATION_MESSAGES.COLLABORATION_DATA_RETRIEVED);\r\n    } catch (error: any) {\r\n      logger.error(`Error fetching all collaborations: ${error.message}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  getCollabDetailsByCollabId = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    const { collabId } = req.params;\r\n    try {\r\n      logger.debug(`Fetching collaboration details for collabId: ${collabId}`);\r\n      const collabDetails = await this._collabService.fetchCollabById(collabId);\r\n      if (!collabDetails) {\r\n        this.sendSuccess(res, { collabData: null }, COLLABORATION_MESSAGES.NO_COLLABORATION_FOUND);\r\n        logger.info(`No collaboration found for collabId: ${collabId}`);\r\n        return;\r\n      }\r\n      this.sendSuccess(res, collabDetails, COLLABORATION_MESSAGES.COLLABORATION_DETAILS_ACCESSED);\r\n    } catch (error: any) {\r\n      logger.error(`Error fetching collaboration details for collabId ${collabId || \"unknown\"}: ${error.message}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  getRequestDetailsByRequestId = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    const { requestId } = req.params;\r\n    try {\r\n      logger.debug(`Fetching request details for requestId: ${requestId}`);\r\n      const requestDetails = await this._collabService.fetchRequestById(requestId);\r\n      if (!requestDetails) {\r\n        this.sendSuccess(res, { requests: null }, COLLABORATION_MESSAGES.NO_REQUEST_FOUND);\r\n        logger.info(`No mentor request found for requestId: ${requestId}`);\r\n        return;\r\n      }\r\n      this.sendSuccess(res, requestDetails, COLLABORATION_MESSAGES.REQUEST_DETAILS_ACCESSED);\r\n    } catch (error: any) {\r\n      logger.error(`Error fetching request details for requestId ${requestId || \"unknown\"}: ${error.message}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  markUnavailableDays = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { collabId } = req.params;\r\n      const { datesAndReasons, requestedBy, requesterId, approvedById, isApproved } = req.body;\r\n      const updatedCollaboration = await this._collabService.markUnavailableDaysService(collabId, {\r\n        datesAndReasons,\r\n        requestedBy,\r\n        requesterId,\r\n        approvedById,\r\n        isApproved,\r\n      });\r\n      this.sendSuccess(res, updatedCollaboration, COLLABORATION_MESSAGES.UNAVAILABLE_DAYS_UPDATED);\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  updateTemporarySlotChanges = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { collabId } = req.params;\r\n      const { datesAndNewSlots, requestedBy, requesterId, approvedById, isApproved } = req.body;\r\n      const updatedCollaboration = await this._collabService.updateTemporarySlotChangesService(collabId, {\r\n        datesAndNewSlots,\r\n        requestedBy,\r\n        requesterId,\r\n        approvedById,\r\n        isApproved,\r\n      });\r\n      this.sendSuccess(res, updatedCollaboration, COLLABORATION_MESSAGES.TEMPORARY_SLOT_CHANGES_UPDATED);\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  approveTimeSlotRequest = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { collabId } = req.params;\r\n      const { requestId, isApproved, requestType } = req.body;\r\n      const updatedCollaboration = await this._collabService.processTimeSlotRequest(collabId, requestId, isApproved, requestType);\r\n      this.sendSuccess(res, updatedCollaboration, COLLABORATION_MESSAGES.TIME_SLOT_REQUEST_PROCESSED);\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  getMentorLockedSlotsController = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    const { mentorId } = req.params;\r\n    try {\r\n      if (!mentorId) {\r\n        throw new HttpError(ERROR_MESSAGES.MENTOR_ID_REQUIRED, StatusCodes.BAD_REQUEST);\r\n      }\r\n      logger.debug(`Fetching locked slots for mentorId: ${mentorId}`);\r\n      const lockedSlots = await this._collabService.getMentorLockedSlots(mentorId);\r\n      if (lockedSlots.length === 0) {\r\n        this.sendSuccess(res, { lockedSlots: [] }, COLLABORATION_MESSAGES.NO_LOCKED_SLOTS_FOUND);\r\n        logger.info(`No locked slots found for mentorId: ${mentorId}`);\r\n        return;\r\n      }\r\n      this.sendSuccess(res, { lockedSlots }, COLLABORATION_MESSAGES.LOCKED_SLOTS_RETRIEVED);\r\n    } catch (error: any) {\r\n      logger.error(`Error fetching locked slots for mentorId ${mentorId || \"unknown\"}: ${error.message}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  downloadReceiptController = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    const { collabId } = req.params;\r\n    try {\r\n      logger.debug(`Request to download receipt for collabId: ${collabId}`);\r\n      const pdfBuffer = await this._collabService.generateReceiptPDF(collabId);\r\n      res.setHeader(\"Content-Type\", \"application/pdf\");\r\n      res.setHeader(\"Content-Disposition\", `attachment; filename=receipt-${collabId}.pdf`);\r\n      res.send(pdfBuffer);\r\n    } catch (error: any) {\r\n      logger.error(`Error generating receipt for collabId ${collabId}: ${error.message}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  public deleteMentorRequestController = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n  try {\r\n    const { id } = req.params;\r\n    await this._collabService.deleteMentorRequestService(id);\r\n    this.sendSuccess(res, null, \"Mentor request deleted successfully\");\r\n  } catch (error) {\r\n    next(error);\r\n  }\r\n};\r\n}\r\n"]}