{"version":3,"file":"contact-controller.js","sourceRoot":"","sources":["../../src/controllers/contact-controller.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AACA,yCAA+C;AAC/C,wEAAoE;AACpE,kEAA0C;AAE1C,+DAAwD;AACxD,kEAAyD;AAEzD,gEAA6D;AAC7D,oDAAyD;AAGlD,IAAM,iBAAiB,GAAvB,MAAM,iBAAkB,SAAQ,gCAAc;IAGnD,YAAuC,cAAgC;QACrE,KAAK,EAAE,CAAC;QAIT,oBAAe,GAAG,KAAK,EAAE,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAiB,EAAE;YAC1F,IAAI,CAAC;gBACH,MAAM,MAAM,GAAG,GAAG,CAAC,WAAW,EAAE,GAAG,CAAC;gBACpC,MAAM,QAAQ,GAAG,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC;gBACvC,IAAI,CAAC,MAAM,IAAI,CAAC,QAAQ,EAAE,CAAC;oBACzB,MAAM,IAAI,yBAAS,CAAC,+BAAc,CAAC,wBAAwB,EAAE,+BAAW,CAAC,WAAW,CAAC,CAAC;gBACxF,CAAC;gBAED,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,MAAM,EAAE,QAAQ,EAAE,CAAC,CAAC;gBAChF,IAAI,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;oBAC1B,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,EAAE,EAAE,2BAAgB,CAAC,iBAAiB,CAAC,CAAC;oBAC9D,gBAAM,CAAC,IAAI,CAAC,iCAAiC,MAAM,EAAE,CAAC,CAAC;oBACvD,OAAO;gBACT,CAAC;gBACD,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,QAAQ,EAAE,2BAAgB,CAAC,kBAAkB,CAAC,CAAC;YACvE,CAAC;YAAC,OAAO,KAAU,EAAE,CAAC;gBACpB,gBAAM,CAAC,KAAK,CAAC,6BAA6B,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;gBAC3D,IAAI,CAAC,KAAK,CAAC,CAAC;YACd,CAAC;QACH,CAAC,CAAC;QAtBA,IAAI,CAAC,eAAe,GAAG,cAAc,CAAC;IACxC,CAAC;CAsBF,CAAA;AA5BY,8CAAiB;4BAAjB,iBAAiB;IAD7B,IAAA,sBAAU,GAAE;IAIE,WAAA,IAAA,kBAAM,EAAC,iBAAiB,CAAC,CAAA;;GAH3B,iBAAiB,CA4B7B","sourcesContent":["import { NextFunction, Request, Response } from 'express';\r\nimport { inject, injectable } from 'inversify';\r\nimport { BaseController } from '../core/controller/base-controller';\r\nimport logger from '../core/utils/logger';\r\nimport { IContactController } from '../Interfaces/Controller/i-contact-controller';\r\nimport { HttpError } from '../core/utils/error-handler';\r\nimport { StatusCodes } from \"../enums/status-code-enums\";\r\nimport { IContactService } from '../Interfaces/Services/i-contact-service';\r\nimport { ERROR_MESSAGES } from '../constants/error-messages';\r\nimport { CONTACT_MESSAGES } from '../constants/messages';\r\n\r\n@injectable()\r\nexport class ContactController extends BaseController implements IContactController{\r\n  private _contactService: IContactService;\r\n\r\n  constructor(@inject('IContactService') contactService : IContactService) {\r\n    super();\r\n    this._contactService = contactService;\r\n  }\r\n\r\n   getUserContacts = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const userId = req.currentUser?._id;\r\n      const userRole = req.currentUser?.role;\r\n      if (!userId || !userRole) {\r\n        throw new HttpError(ERROR_MESSAGES.REQUIRED_USER_ID_OR_ROLE, StatusCodes.BAD_REQUEST);\r\n      }\r\n\r\n      const contacts = await this._contactService.getUserContacts(userId?.toString());\r\n      if (contacts.length === 0) {\r\n        this.sendSuccess(res, [], CONTACT_MESSAGES.NO_CONTACTS_FOUND);\r\n        logger.info(`No contacts found for userId: ${userId}`);\r\n        return;\r\n      }\r\n      this.sendSuccess(res, contacts, CONTACT_MESSAGES.CONTACTS_RETRIEVED);\r\n    } catch (error: any) {\r\n      logger.error(`Error in getUserContacts: ${error.message}`);\r\n      next(error);\r\n    }\r\n  };\r\n}"]}