{"version":3,"file":"mentor-controller.js","sourceRoot":"","sources":["../../src/controllers/mentor-controller.ts"],"names":[],"mappings":"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","sourcesContent":["import { Request, Response, NextFunction } from \"express\";\r\nimport { inject, injectable } from \"inversify\";\r\nimport { BaseController } from \"../core/controller/base-controller\";\r\nimport { uploadMedia } from \"../core/utils/cloudinary\";\r\nimport logger from \"../core/utils/logger\";\r\nimport { IMentorController } from \"../Interfaces/Controller/i-mentor-controller\";\r\nimport { HttpError } from \"../core/utils/error-handler\";\r\nimport { StatusCodes } from \"../enums/status-code-enums\";\r\nimport { IMentorService } from \"../Interfaces/Services/i-mentor-service\";\r\nimport { MENTOR_MESSAGES } from \"../constants/messages\";\r\nimport { ERROR_MESSAGES } from \"../constants/error-messages\";\r\nimport { MentorExperienceInput } from \"../Utils/types/mentor-types\";\r\n\r\n@injectable()\r\nexport class MentorController extends BaseController implements IMentorController{\r\n  private _mentorService: IMentorService;\r\n\r\n  constructor(\r\n    @inject('IMentorService') mentorService : IMentorService,\r\n  ) {\r\n    super();\r\n    this._mentorService = mentorService;\r\n  }\r\n\r\n  checkMentorStatus = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { id } = req.params;\r\n      const mentor = await this._mentorService.getMentorByUserId(id);\r\n      this.sendSuccess(res, { mentor: mentor || null }, MENTOR_MESSAGES.MENTOR_STATUS_RETRIEVED);\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  getMentorDetails = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { mentorId } = req.params;\r\n      const mentor = await this._mentorService.getMentorByMentorId(mentorId);\r\n      if (!mentor) {\r\n        this.sendSuccess(res,  mentor, MENTOR_MESSAGES.NO_MENTOR_FOUND);\r\n        return;\r\n      }\r\n      this.sendSuccess(res, { mentor }, MENTOR_MESSAGES.MENTOR_DETAILS_RETRIEVED);\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  getMentorExperiences = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n  try {\r\n    const { mentorId } = req.params;\r\n    const experiences = await this._mentorService.getMentorExperiences(mentorId);\r\n    if (!experiences) {\r\n        this.sendSuccess(res,  experiences, MENTOR_MESSAGES.NO_MENTOR_EXPERIENCE_FOUND);\r\n        return;\r\n      }\r\n    this.sendSuccess(res, { experiences }, MENTOR_MESSAGES.MENTOR_EXPERIENCE_DETAILS_RETRIEVED);\r\n  } catch (error: any) {\r\n    next(error);\r\n  }\r\n};\r\n\r\n  createMentor = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { userId, specialization, bio, price, skills, availableSlots, timePeriod, experiences } = req.body;\r\n\r\n      let parsedExperiences: MentorExperienceInput[] = experiences ? JSON.parse(experiences) : [];\r\n\r\n      if (!Array.isArray(parsedExperiences)) {\r\n      throw new HttpError(\"Experiences must be an array\", StatusCodes.BAD_REQUEST);\r\n    }\r\n\r\n      let uploadedCertificates: string[] = [];\r\n      if (req.files && Array.isArray(req.files) && req.files.length > 0) {\r\n        const files = req.files ;\r\n        const uploadPromises = files.map((file) =>\r\n          uploadMedia(file.path, \"mentor_certificates\", file.size).then((result) => result.url)\r\n        );\r\n        uploadedCertificates = await Promise.all(uploadPromises);\r\n      } else {\r\n        throw new HttpError(ERROR_MESSAGES.CERTIFICATES_REQUIRED, StatusCodes.BAD_REQUEST);\r\n      }\r\n\r\n      const newMentor = await this._mentorService.submitMentorRequest({\r\n        userId,\r\n        skills: JSON.parse(skills),\r\n        specialization,\r\n        bio,\r\n        price,\r\n        availableSlots: JSON.parse(availableSlots),\r\n        timePeriod,\r\n        certifications: uploadedCertificates,\r\n        experiences: parsedExperiences,\r\n      });\r\n\r\n      this.sendCreated(res, newMentor, MENTOR_MESSAGES.MENTOR_REGISTRATION_SUBMITTED);\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  getAllMentorRequests = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { page = \"1\", limit = \"10\", search = \"\", status = \"\", sort = \"desc\" } = req.query;\r\n      const mentorRequests = await this._mentorService.getAllMentorRequests(\r\n        parseInt(page as string),\r\n        parseInt(limit as string),\r\n        search as string,\r\n        status as string,\r\n        sort as \"asc\" | \"desc\"\r\n      );\r\n\r\n      if (mentorRequests.mentors.length === 0) {\r\n        this.sendSuccess(res, { mentors: [], total: 0 }, MENTOR_MESSAGES.NO_MENTOR_REQUESTS_FOUND);\r\n        return;\r\n      }\r\n      this.sendSuccess(\r\n        res,\r\n        {\r\n          mentors: mentorRequests.mentors,\r\n          total: mentorRequests.total,\r\n          currentPage: parseInt(page as string),\r\n          totalPages: mentorRequests.pages,\r\n        },\r\n        MENTOR_MESSAGES.MENTOR_REQUESTS_RETRIEVED\r\n      );\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  getAllMentors = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { search, page, limit, skill, category, sortBy, sortOrder, excludeMentorId } = req.query;\r\n      const query: any = {};\r\n\r\n      if (search) query.search = search as string;\r\n      if (page) query.page = parseInt(page as string, 10);\r\n      if (limit) query.limit = parseInt(limit as string, 10);\r\n      if (skill) query.skill = skill as string;\r\n      if (category) query.category = category as string;\r\n      if (sortBy) query.sortBy = sortBy as string;\r\n      if (sortOrder) query.sortOrder = sortOrder as string;\r\n      if (excludeMentorId) query.excludeMentorId = excludeMentorId as string;\r\n\r\n      logger.debug(`Fetching mentors with query: ${JSON.stringify(query)}`);\r\n      const result = await this._mentorService.getAllMentors(query);\r\n\r\n      if (result.mentors.length === 0) {\r\n        this.sendSuccess(\r\n          res,\r\n          { mentors: [], total: 0, page: query.page || 1, limit: query.limit || 10 },\r\n          MENTOR_MESSAGES.NO_MENTORS_FOUND\r\n        );\r\n        return;\r\n      }\r\n\r\n      const data = !search && !page && !limit && !skill\r\n        ? result.mentors\r\n        : {\r\n            mentors: result.mentors,\r\n            total: result.total,\r\n            page: query.page || 1,\r\n            limit: query.limit || 10,\r\n          };\r\n\r\n      this.sendSuccess(res, data, MENTOR_MESSAGES.MENTORS_FETCHED);\r\n    } catch (error: any) {\r\n      logger.error(`Error in getAllMentors: ${error.message}`);\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  getMentorByUserId = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { userId } = req.params;\r\n      const mentor = await this._mentorService.getMentorByUserId(userId);\r\n      if (!mentor) {\r\n        this.sendSuccess(res,  mentor, MENTOR_MESSAGES.NO_MENTOR_FOUND);\r\n        return;\r\n      }\r\n      this.sendSuccess(res, mentor, MENTOR_MESSAGES.MENTOR_RETRIEVED);\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  approveMentorRequest = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { id } = req.params;\r\n      await this._mentorService.approveMentorRequest(id);\r\n      this.sendSuccess(res, null, MENTOR_MESSAGES.MENTOR_REQUEST_APPROVED);\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  rejectMentorRequest = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { id } = req.params;\r\n      const { reason } = req.body;\r\n      if (!reason) {\r\n        throw new HttpError(ERROR_MESSAGES.REJECTION_REASON_REQUIRED, StatusCodes.BAD_REQUEST);\r\n      }\r\n      await this._mentorService.rejectMentorRequest(id, reason);\r\n      this.sendSuccess(res, null, MENTOR_MESSAGES.MENTOR_REQUEST_REJECTED);\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  cancelMentorship = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { mentorId } = req.params;\r\n      await this._mentorService.cancelMentorship(mentorId);\r\n      this.sendSuccess(res, null, MENTOR_MESSAGES.MENTORSHIP_CANCELLED);\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  updateMentorProfile = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { mentorId } = req.params;\r\n      const updateData = req.body;\r\n      const mentorData = await this._mentorService.updateMentorById(mentorId, updateData);\r\n      this.sendSuccess(res, mentorData, MENTOR_MESSAGES.MENTOR_PROFILE_UPDATED);\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  getMentorAnalytics = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { page = \"1\", limit = \"10\", sortBy = \"totalEarnings\", sortOrder = \"desc\", search = \"\" } = req.query;\r\n\r\n      const validSortFields = [\"totalEarnings\", \"platformFees\", \"totalCollaborations\", \"avgCollabPrice\"] as const;\r\n      type SortByType = (typeof validSortFields)[number];\r\n      const validatedSortBy: SortByType = validSortFields.includes(sortBy as SortByType)\r\n        ? (sortBy as SortByType)\r\n        : \"totalEarnings\";\r\n\r\n      const validSortOrders = [\"asc\", \"desc\"] as const;\r\n      type SortOrderType = (typeof validSortOrders)[number];\r\n      const validatedSortOrder: SortOrderType = validSortOrders.includes(sortOrder as SortOrderType)\r\n        ? (sortOrder as SortOrderType)\r\n        : \"desc\";\r\n\r\n      const analytics = await this._mentorService.getMentorAnalytics(\r\n        parseInt(page as string) || 1,\r\n        parseInt(limit as string) || 10,\r\n        validatedSortBy,\r\n        validatedSortOrder,\r\n        search as string\r\n      );\r\n      this.sendSuccess(\r\n        res,\r\n        {\r\n          mentors: analytics.mentors,\r\n          total: analytics.total,\r\n          currentPage: parseInt(page as string) || 1,\r\n          totalPages: analytics.pages,\r\n        },\r\n        MENTOR_MESSAGES.MENTOR_ANALYTICS_RETRIEVED\r\n      );\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  getSalesReport = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const { period = \"1month\" } = req.query;\r\n      const report = await this._mentorService.getSalesReport(period as string);\r\n      this.sendSuccess(res, report, MENTOR_MESSAGES.SALES_REPORT_RETRIEVED);\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  addExperience = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const userId = req.query.userId as string;\r\n      if (!userId) {\r\n        throw new HttpError(\"Unauthorized\", StatusCodes.UNAUTHORIZED);\r\n      }\r\n      const experienceData = req.body;\r\n      const newExperience = await this._mentorService.addMentorExperience(userId, experienceData);\r\n\r\n      this.sendSuccess(res, { experience: newExperience }, \"Experience added successfully\");\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  updateExperience = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const userId = req.query.userId as string;\r\n      const { experienceId } = req.params;\r\n      const updateData = req.body;\r\n      if (!userId || !experienceId) {\r\n        throw new HttpError(\"Invalid request\", StatusCodes.BAD_REQUEST);\r\n      }\r\n\r\n      const updatedExperience = await this._mentorService.updateMentorExperience(userId, experienceId, updateData);\r\n\r\n      this.sendSuccess(res, { experience: updatedExperience }, \"Experience updated successfully\");\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  deleteExperience = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n    try {\r\n      const userId = req.query.userId as string;\r\n      const { experienceId } = req.params;\r\n\r\n      if (!userId || !experienceId) {\r\n        throw new HttpError(\"Invalid request\", StatusCodes.BAD_REQUEST);\r\n      }\r\n      await this._mentorService.deleteMentorExperience(userId, experienceId);\r\n\r\n      this.sendSuccess(res, null, \"Experience deleted successfully\");\r\n    } catch (error: any) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  downloadSalesReportPDF = async (req: Request, res: Response, next: NextFunction): Promise<void> => {\r\n  const { period } = req.query;\r\n\r\n  if (!period || typeof period !== \"string\") {\r\n    res.status(400).json({ message: \"Period query parameter is required\" });\r\n    return;\r\n  }\r\n  try {\r\n    logger.debug(`Admin requested sales report PDF for period: ${period}`);\r\n\r\n    const pdfBuffer = await this._mentorService.generateSalesReportPDF(period);\r\n\r\n    const periodLabel =\r\n      period === \"1month\" ? \"Last-30-Days\" :\r\n      period === \"1year\" ? \"Last-1-Year\" :\r\n      \"Last-5-Years\";\r\n\r\n    const filename = `sales-report-${periodLabel}-${new Date().toISOString().split(\"T\")[0]}.pdf`;\r\n\r\n    res.setHeader(\"Content-Type\", \"application/pdf\");\r\n    res.setHeader(\"Content-Disposition\", `attachment; filename=\"${filename}\"`);\r\n    res.send(pdfBuffer);\r\n  } catch (error: any) {\r\n    logger.error(`Error in downloadSalesReportPDF: ${error.message}`);\r\n    next(error);\r\n  }\r\n};\r\n\r\n\r\n}\r\n"]}