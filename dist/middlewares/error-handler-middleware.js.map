{"version":3,"file":"error-handler-middleware.js","sourceRoot":"","sources":["../../src/middlewares/error-handler-middleware.ts"],"names":[],"mappings":";;;;;;AACA,+DAAuD;AACvD,kEAA0C;AAGnC,MAAM,YAAY,GAAG,CAC1B,GAAU,EACV,IAAa,EACb,GAAa,EACb,KAAmB,EACb,EAAE;IACR,IAAI,GAAG,YAAY,wBAAQ,EAAE,CAAC;QAC5B,gBAAM,CAAC,KAAK,CAAC,aAAa,GAAG,CAAC,IAAI,KAAK,GAAG,CAAC,OAAO,EAAE,CAAC,CAAC;QACtD,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;YAC9B,MAAM,EAAE,OAAO;YACf,KAAK,EAAE,GAAG,CAAC,IAAI;YACf,OAAO,EAAE,GAAG,CAAC,OAAO;YACpB,OAAO,EAAE,GAAG,CAAC,OAAO,IAAI,IAAI;SAC7B,CAAC,CAAA;QACF,OAAM;IACR,CAAC;IAED,gBAAM,CAAC,KAAK,CAAC,eAAe,GAAG,CAAC,IAAI,KAAK,GAAG,CAAC,OAAO,KAAK,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC;IACtE,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;QACnB,MAAM,EAAE,OAAO;QACf,KAAK,EAAE,qBAAqB;QAC5B,OAAO,EAAE,+CAA+C;KACzD,CAAC,CAAA;AACJ,CAAC,CAAA;AAvBY,QAAA,YAAY,gBAuBxB;AAED,OAAO,CAAC,EAAE,CAAC,oBAAoB,EAAE,CAAC,MAAW,EAAE,OAAqB,EAAE,EAAE;IACtE,gBAAM,CAAC,KAAK,CACV,2BAA2B,OAAO,aAChC,MAAM,EAAE,OAAO,IAAI,MACrB,YAAY,MAAM,EAAE,KAAK,IAAI,gBAAgB,EAAE,CAChD,CAAA;AACH,CAAC,CAAC,CAAA","sourcesContent":["import { Request, Response, NextFunction } from \"express\";\r\nimport { AppError } from \"../core/utils/error-handler\";\r\nimport logger from \"../core/utils/logger\";\r\n\r\n\r\nexport const errorHandler = (\r\n  err: Error,\r\n  _req: Request,\r\n  res: Response,\r\n  _next: NextFunction\r\n): void => {  \r\n  if (err instanceof AppError) {\r\n    logger.error(`[Handled] ${err.name}: ${err.message}`);\r\n    res.status(err.statusCode).json({\r\n      status: \"error\",\r\n      error: err.name,\r\n      message: err.message,\r\n      details: err.details || null,\r\n    })\r\n    return\r\n  }\r\n\r\n  logger.error(`[Unhandled] ${err.name}: ${err.message}\\n${err.stack}`);\r\n  res.status(500).json({\r\n    status: \"error\",\r\n    error: \"InternalServerError\",\r\n    message: \"Something went wrong. Please try again later.\",\r\n  })\r\n}\r\n\r\nprocess.on(\"unhandledRejection\", (reason: any, promise: Promise<any>) => {\r\n  logger.error(\r\n    `Unhandled Rejection at: ${promise}\\nReason: ${\r\n      reason?.message || reason\r\n    }\\nStack: ${reason?.stack || \"No stack trace\"}`\r\n  )\r\n})\r\n"]}